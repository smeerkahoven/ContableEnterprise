# To change this license header, choose License Headers in Project Properties.
# To change this template file, choose Tools | Templates
# and open the template in the editor.

#GET_MENU=select m.nombre as modulo, m.status as modulo_status,f.nombre as formulario, f.url_acceso,f.restful_url, f.status as formulario_acceso, rf.acceder,rf.actualizar,rf.buscar, rf.crear, rf.eliminar from tb_rol_formulario rf inner join tb_formularios f on f.id_formulario = rf.id_formularios inner join tb_modulos m on m.id_modulo = f.id_modulo
GET_MENU=SELECT m.nombre , m.status, f.nombre , f.url_acceso, f.restful_url, f.status , rf.acceder,rf.actualizar,rf.buscar, rf.crear, rf.eliminar,m.class_menu, m.url_acceso, f.id_formulario FROM tb_rol_formulario rf INNER JOIN tb_formularios f on f.id_formulario = rf.id_formularios INNER JOIN tb_modulos m on m.id_modulo = f.id_modulo WHERE rf.id_rol = ?1 ORDER BY m.nombre, f.nombre
GET_EMPRESA_CENTRAL=select * from tb_empresa where tipo='CENTRAL'
GET_SUCURSALES=select * from tb_empresa where tipo='SUCURSAL'
GET_EMPLEADOS=SELECT emp.id_empleado ,emp.nombre,emp.apellido, emp.email, emp.telefono, emp.fecha_alta , emp.fecha_baja , emp.status, emp.id_empresa , razon_social as razonSocial, cargo, sexo FROM db_travel.tb_empleado emp INNER JOIN db_travel.tb_empresa pr  ON pr.id_empresa =emp.id_empresa
GET_EMPLEADOS_COMBO_USUARIO=SELECT * FROM tb_empleado WHERE id_empleado NOT IN ( SELECT e.id_empleado FROM tb_empleado e INNER JOIN tb_user u ON u.id_empleado = e.id_empleado)
GET_MODULO_EDIT=select m.id_modulo, m.nombre, m.status, m.class_menu, f.id_formulario, f.nombre, f.status,  r.crear, r.actualizar, r.eliminar, r.acceder, r.buscar, r.id_rol_formulario, r.id_rol from tb_modulos m inner join tb_formularios f on f.id_modulo = m.id_modulo inner join tb_rol_formulario r on r.id_formularios = f.id_formulario where r.id_rol =?1 order by m.id_modulo, m.nombre, f.id_formulario, f.nombre
GET_MODULO_NUEVO=select m.id_modulo, m.nombre, m.status, m.class_menu,f.id_formulario, f.nombre, f.status,0 as crear, 0 as actualizar, 0 as eliminar, 0 as acceder, 0 as buscar from tb_modulos m inner join tb_formularios f on f.id_modulo = m.id_modulo order by m.id_modulo, m.nombre, f.id_formulario, f.nombre
GET_BANCO_CUENTA_LINK=select b.id_cuenta_banco,b.id_plan_cuentas,pc.nro_plan_cuenta, pc.cuenta, b.id_banco,  b.descripcion FROM cnt_cuenta_banco b INNER JOIN cnt_plan_cuentas pc ON pc.id_plan_cuentas = b.id_plan_cuentas WHERE id_banco= ?1
GET_PLAN_CUENTA_PADRE=select * from cnt_plan_cuentas where nro_plan_cuenta=?1 and id_empresa = ?2
GET_AEROLINA_CUENTA=select ac.id_aerolinea,ac.id_aerolinea_cuenta,ac.id_plan_cuentas,ac.tipo,ac.moneda,pc.nro_plan_cuenta, concat(pc.cuenta,' - ', e.tipo, (case e.tipo when 'SUCURSAL' THEN  concat('-',e.direccion) ELSE ''  end ))as nombreCuenta from cnt_aerolinea_cuenta ac inner join cnt_plan_cuentas pc on pc.id_plan_cuentas = ac.id_plan_cuentas inner join tb_empresa e on e.id_empresa=pc.id_empresa where ac.id_aerolinea=?1 and ac.tipo =?2 and ac.moneda=?3
GET_PLAN_CUENTAS_NRO_PLANCUENTA=SELECT p.id_plan_cuentas,p.nro_plan_cuenta, concat(cuenta,' - ', e.tipo, (case e.tipo when 'SUCURSAL' THEN  concat('-',e.direccion) ELSE ''  end ))as cuenta FROM cnt_plan_cuentas p inner join tb_empresa e on e.id_empresa=p.id_empresa WHERE p.nro_plan_cuenta_padre=?1 ORDER BY p.nro_plan_cuenta, p.cuenta, p.nivel asc;
GET_BANCOS_CUENTAS_EMPRESA=SELECT c.id_plan_cuentas as id, concat(b.nombre , ' - ', c.descripcion )as name FROM cnt_bancos b inner join cnt_cuenta_banco c on c.id_banco= b.id_banco inner join cnt_plan_cuentas p on c.id_plan_cuentas = p.id_plan_cuentas where p.id_empresa = ?1
GET_NOTA_DEBITO_BOLETOS=select distinct nd.id_nota_debito, nd.id_empresa, nd.id_cliente, nd.id_counter,nd.fecha_emision, nd.fecha_insert, nd.monto_total_bs, nd.monto_total_usd, nd.monto_adeudado_bs,nd.monto_adeudado_usd,nd.factor_cambiario,nd.forma_pago, nd.tipo_contado, nd.id_banco, nd.nro_cheque, nd.id_tarjeta_credito, nd.nro_tarjeta, nd.nro_deposito, nd.id_cuenta_deposito, nd.id_usuario_creador, nd.credito_dias, nd.credito_vencimiento, nd.credito_vencimiento, nd.combinado_contado, nd.combinado_tarjeta,nd.combinado_contado_tipo, nd.estado from cnt_nota_debito nd left join cnt_nota_debito_transaccion dt on dt.id_nota_debito = nd.id_nota_debito left join cnt_boleto bo on bo.id_boleto = dt.id_boleto WHERE nd.id_empresa=?1

GET_NEXT_ID_LIBRO=SELECT CAST(count(id_libro) + 1 as unsigned int) as id_next from cnt_comprobante_contable where tipo=?1

DELETE_AEROLINEA=DELETE FROM cnt_aerolinea WHERE id_aerolinea = ?1
DELETE_AEROLINEA_CUENTA=DELETE FROM cnt_aerolinea_cuenta WHERE id_aerolinea_cuenta=?1
DELETE_PLAN_CUENTAS=DELETE FROM cnt_plan_cuentas WHERE id_plan_cuentas= ?1 and id_empresa= ?2
DELETE_IMPUESTO_AEROLINEA=delete  from cnt_aerolinea_impuesto WHERE id_aerolinea_impuesto=?1
DELETE_COMISION_PROMOTOR_AEROLINEA=delete from cnt_com_promotor_aerolinea WHERE id_comision_promotor=?1
DELETE_CUENTA_BANCO=DELETE FROM cnt_cuenta_banco WHERE id_cuenta_banco=?1
DELETE_CLIENTE=DELETE FROM cnt_cliente WHERE id_cliente=?1
DELETE_CLIENTE_SOLICITADO=DELETE FROM cnt_cliente_solicitado WHERE id_cliente_solicitado=?1

UPDATE_COMPROBANTE_CONTABLE_ESTADO=UPDATE cnt_comprobante_contable SET estado=?1, id_usuario_anulado=?2 WHERE id_libro=?3
UPDATE_COMPROBANTE_CONTABLE_TOTALES=UPDATE cnt_comprobante_contable SET totalDebeNac=?1, totalHaberNac=?2, totalDebeExt=?3, totalHaberExt=?4 WHERE id_libro=?5
DELETE_COMPROBANTE_TRANSACTION=DELETE from cnt_asiento_contable WHERE id_asiento=?1