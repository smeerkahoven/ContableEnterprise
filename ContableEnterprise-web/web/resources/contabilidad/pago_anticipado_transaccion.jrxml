<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="null" language="groovy" pageWidth="612" pageHeight="346" columnWidth="596" leftMargin="1" rightMargin="15" topMargin="1" bottomMargin="1" uuid="1b7078e6-ceb5-4087-92f3-21ab3eca1288">
	<property name="ireport.zoom" value="1.6105100000000079"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="ID_TRANSACCION" class="java.lang.String"/>
	<queryString>
		<![CDATA[select 
 distinct
 pat.id_pago_anticipado_transaccion
 , pat.numeracion
 , cc.id_numero_gestion 
 , cc.gestion
 , pa.factor_cambiario
 , ndt.id_nota_debito
 , pat.id_pago_anticipado
 , pat.id_nota_debito_transaccion
 , pat.descripcion
 , pa.id_cliente, upper(	cl.nombre) cliente, cl.telefono_fijo
 , coalesce(pat.monto,0)monto
 , number_to_string(pat.monto) literal
, round(abs(mod(pat.monto,1)*100)) decimal_part
, date_format(pat.fecha_insert,'%d/%m/%y')fecha_emision
, pat.fecha_insert
, case pat.estado when 'A' then 'ANULADO' ELSE 'EMITIDO'  END estado
, case pat.moneda when 'B' then 'BOB' when 'U' then 'USD' end moneda
, pat.id_usuario_creador
, nd.numeracion nd_numeracion
, pa.numeracion pa_numeracion
 from cnt_pago_anticipado_transaccion  pat
 inner join cnt_pago_anticipado pa on pa.id_pago_anticipado = pat.id_pago_anticipado
 inner join cnt_cliente cl on cl.id_cliente = pa.id_cliente
 inner join cnt_nota_debito_transaccion ndt on ndt.id_nota_debito_transaccion = pat.id_nota_debito_transaccion
 inner join cnt_nota_debito nd on nd.id_nota_debito = ndt.id_nota_debito
 left join cnt_asiento_contable ac on ac.id_pago_anticipado_transaccion = pat.id_pago_anticipado_transaccion
 left join cnt_comprobante_contable cc on cc.id_libro = ac.id_libro and cc.tipo in ('AD')
where pat.id_pago_anticipado_transaccion = $P{ID_TRANSACCION}]]>
	</queryString>
	<field name="id_pago_anticipado_transaccion" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="numeracion" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id_numero_gestion" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="gestion" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="factor_cambiario" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id_nota_debito" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id_pago_anticipado" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id_nota_debito_transaccion" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="descripcion" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id_cliente" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cliente" class="java.lang.String"/>
	<field name="telefono_fijo" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="monto" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="literal" class="java.lang.String"/>
	<field name="decimal_part" class="java.math.BigDecimal"/>
	<field name="fecha_emision" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fecha_insert" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="estado" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="moneda" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="id_usuario_creador" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nd_numeracion" class="java.lang.Integer"/>
	<field name="pa_numeracion" class="java.lang.Integer"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="15" splitType="Stretch">
			<line>
				<reportElement x="4" y="14" width="565" height="1" uuid="3bc058aa-e879-4659-b64b-16760e44442f"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Dashed"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="319" y="1" width="253" height="12" uuid="ce333745-016b-4ba7-9da3-95d039bf3d32"/>
				<textElement textAlignment="Right">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" isItalic="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Acreditación Depósito #"+$F{numeracion}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="64" y="0" width="180" height="12" uuid="83c8dc82-c156-486c-86ac-c12706ee2eab"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{gestion}+ "-"+ 
    $F{id_numero_gestion} + " AD"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="4" y="0" width="59" height="12" uuid="1784c7c7-6fd6-4770-a515-72183dd782cc"/>
				<textElement textAlignment="Right">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Asiento:]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="26" splitType="Stretch">
			<staticText>
				<reportElement x="4" y="1" width="59" height="12" uuid="91211e5a-700a-442e-9e9a-67d3115dfca0"/>
				<textElement textAlignment="Right">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Señores:]]></text>
			</staticText>
			<textField>
				<reportElement x="496" y="14" width="75" height="12" uuid="f012d6dc-7a1f-4385-a4df-4e3d93e299a6"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_emision}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="419" y="1" width="77" height="12" uuid="69d122cc-524f-409e-8377-3ab5e99f0540"/>
				<textElement textAlignment="Right">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Factor:]]></text>
			</staticText>
			<staticText>
				<reportElement x="398" y="14" width="98" height="12" uuid="d97a1993-c0bc-4d22-9304-bab80c31ac7d"/>
				<textElement textAlignment="Right">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Fecha Emision:]]></text>
			</staticText>
			<textField>
				<reportElement x="63" y="1" width="356" height="12" uuid="aa446270-d579-48a9-b474-0968ef915e27"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cliente}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="496" y="1" width="75" height="12" uuid="9cf860d9-5b99-4ce4-863b-17ebf7c1b111"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{factor_cambiario}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="4" y="14" width="59" height="12" uuid="0e1315bc-fefc-4f72-8735-0fb7704ba0b7"/>
				<textElement textAlignment="Right">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[Estado:]]></text>
			</staticText>
			<textField>
				<reportElement x="63" y="14" width="334" height="12" uuid="93b9c2f5-5688-4ac1-b903-07a7a3b430e4"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{estado}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="43" splitType="Stretch">
			<staticText>
				<reportElement x="442" y="3" width="49" height="12" uuid="33b2b612-3881-444a-abe3-1d2844441aad"/>
				<textElement textAlignment="Center">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[MONEDA]]></text>
			</staticText>
			<staticText>
				<reportElement x="4" y="3" width="380" height="12" uuid="e4199d13-a92a-4363-9ab5-39a871af2c62"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[DESCRIPCION]]></text>
			</staticText>
			<staticText>
				<reportElement x="491" y="3" width="80" height="12" uuid="b9973bd9-ac0b-4157-a451-93c5a0552fd5"/>
				<textElement textAlignment="Right">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[MONTO]]></text>
			</staticText>
			<line>
				<reportElement x="4" y="15" width="565" height="2" uuid="5e069e82-97cf-420e-bf7f-111a57b8aabf"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Dashed"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="442" y="19" width="49" height="12" uuid="1c603167-c19e-468d-825e-12f3c5235eb2"/>
				<textElement textAlignment="Center">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{moneda}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="491" y="19" width="80" height="12" uuid="3f0064f6-0b23-4b7d-9c5d-f8994da6ce46"/>
				<textElement textAlignment="Right">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{monto}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="4" y="19" width="438" height="12" isPrintWhenDetailOverflows="true" uuid="40928b92-7ec9-46d4-8733-37acad64bf38"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA["DEPOSITO ANTICIPADO " + $F{pa_numeracion} + " PARA LA NOTA DE DEBITO "+ $F{nd_numeracion}+ " CON DESCRIPCION: " +  $F{descripcion}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="117" splitType="Immediate">
			<staticText>
				<reportElement x="4" y="2" width="438" height="12" uuid="ec5e034f-fe5a-4596-b3b5-fba92a343bae"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[TOTAL]]></text>
			</staticText>
			<textField pattern="#,##0.00">
				<reportElement x="471" y="2" width="100" height="12" uuid="53003912-bffe-4b37-9185-01e38041bfc6"/>
				<textElement textAlignment="Right">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{monto}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="4" y="14" width="568" height="12" isPrintWhenDetailOverflows="true" uuid="f0579487-6e2c-4581-856d-545a9722a1ee"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Son:" + $F{literal} + " " + ($F{decimal_part}>10?$F{decimal_part}:"0"+$F{decimal_part})+"/100 " + $F{moneda}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="5" y="0" width="566" height="1" uuid="aa9fb224-9a40-496d-bf69-8d1655ffa819"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Dashed"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement x="351" y="76" width="200" height="12" uuid="2da1d7a4-23ba-46c0-b77c-c97acfc64208"/>
				<textElement textAlignment="Center">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<text><![CDATA[FIRMA DEL CLIENTE]]></text>
			</staticText>
			<textField>
				<reportElement x="46" y="76" width="200" height="12" uuid="72313c7b-c225-410f-8ea8-17bcadb4c591"/>
				<textElement textAlignment="Center">
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA["AUTORIZADO POR :" + $F{id_usuario_creador}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="46" y="75" width="200" height="1" uuid="7daf2de4-3486-45f7-a7d3-d02d42e569d1"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Dashed"/>
				</graphicElement>
			</line>
			<line>
				<reportElement x="351" y="75" width="200" height="1" uuid="3d325509-9800-4fef-9da6-9376c61ff5d8"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Dashed"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="4" y="91" width="507" height="12" uuid="1a165738-5c3d-404d-8dbb-dd241f33b51e"/>
				<textElement>
					<font fontName="Courier 10 Pitch" size="11" isBold="false" pdfFontName="Courier" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Creado por: " + $F{id_usuario_creador} + " fecha: " + $F{fecha_insert}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
